#!/bin/bash
################################################################################
# Pegasus' Linux Administration Tools	#		      Bootstrap Config #
# (C)2017-2018 Mattijs Snepvangers	#		 pegasus.ict@gmail.com #
# License: MIT				#   Please keep my name in the credits #
################################################################################
# cfg ver: 0.4.2 ALPHA
# cfg build 20180828

declare -ag CFG_CAT=("MAIN" "SYSTEM_ROLE" "SYSTEM_ROLE_DEPENDENCIES" "CONTAINER_ROLE_DEPENDENCIES" "SOURCES_LIST" "PPA_KEYS" "PACKAGES" "EXTRA_SW")
declare -ag CFG_PROFILES=("BASIC" "WS" "SERVER" "LXC_HOST" "MAIN_SERVER" "DEV_WS" "CONTAINER")
declare -ag CFG_CONTAINER_PROFILES=("BASIC" "DB" "FIREWALL" "HONEY" "NAS" "PXE" "ROUTER" "WEB" "X11")
declare -Ag CFG=(
    ### GENERAL SETTINGS #######################################################
    # Verbosity: 1=CRITICAL 2=ERROR 3=WARNING 4=VERBOSE 5=DEBUG
    [MAIN__VERBOSITY]=2
    [MAIN__REBOOT_TIME]="23:59"

    ### SYSTEM ROLE DEFINITIONS ################################################
    # CHOSEN_ROLE => BASIC | WS | SERVER | LXC_HOST | MAIN_SERVER | DEV_WS | CONTAINER
    [SYSTEM_ROLE__CHOSEN_ROLE]="DEV_WS"
    # CONTAINER_ROLE => BASIC | FIREWALL | HONEY | NAS | PXE | ROUTER | WEB | X11
    [SYSTEM_ROLE__CONTAINER_ROLE]=false
	### SYSTEM_ROLE DEPS #######################################################
	[SYSTEM_ROLE_DEPENDENCIES__WS]="BASIC"
	[SYSTEM_ROLE_DEPENDENCIES__SERVER]="BASIC"
	[SYSTEM_ROLE_DEPENDENCIES__LXC_HOST]="SERVER"
	[SYSTEM_ROLE_DEPENDENCIES__DEV_WS]="WS LXC_HOST"
	[SYSTEM_ROLE_DEPENDENCIES__MAIN_SERVER]="LXC_HOST"
	[SYSTEM_ROLE_DEPENDENCIES__CONTAINER]="SERVER"
	### CONTAINER_ROLES DEPENDENCIES ###########################################
	[CONTAINER_ROLE_DEPENDENCIES__BASIC]=false
	[CONTAINER_ROLE_DEPENDENCIES__FIREWALL]=false
	[CONTAINER_ROLE_DEPENDENCIES__HONEY]=false
	[CONTAINER_ROLE_DEPENDENCIES__NAS]=false
	[CONTAINER_ROLE_DEPENDENCIES__PXE]=false
	[CONTAINER_ROLE_DEPENDENCIES__ROUTER]=false
	[CONTAINER_ROLE_DEPENDENCIES__WEB]=false
	[CONTAINER_ROLE_DEPENDENCIES__X11]="WS"
	### APT	SOURCES ############################################################
	[SOURCES_LIST__BASIC]=<<-EOT
    ### GetDeb http://www.getdeb.net
    deb http://archive.getdeb.net/ubuntu bionic-getdeb apps
    ### Syncthing https://syncthing.net/
    deb http://apt.syncthing.net/ syncthing release
    ### TeamViewer https://teamviewer.com
    deb http://linux.teamviewer.com/deb stable main
    deb http://linux.teamviewer.com/deb preview main
    ### WebUpd8 http://www.webupd8.org/
    deb http://ppa.launchpad.net/nilarimogard/webupd8/ubuntu bionic main
    deb-src http://ppa.launchpad.net/nilarimogard/webupd8/ubuntu bionic main
	EOT
	[SOURCES_LIST__WS]=<<-EOT
    ### DropBox http://dropbox.com
    deb http://linux.dropbox.com/ubuntu/ bionic main
    ### GIMP https://launchpad.net/~otto-kesselgulasch/+archive/gimp
    deb http://ppa.launchpad.net/otto-kesselgulasch/gimp/ubuntu bionic main
    deb-src http://ppa.launchpad.net/otto-kesselgulasch/gimp/ubuntu bionic main
    ### Gnome3 https://launchpad.net/~gnome3-team/+archive/gnome3
    deb http://ppa.launchpad.net/gnome3-team/gnome3/ubuntu bionic main
    deb-src http://ppa.launchpad.net/gnome3-team/gnome3/ubuntu bionic main
    ### Google_Chrome="http://www.google.com/linuxrepositories/
    deb [arch=amd64] http://dl.google.com/linux/chrome/deb/ stable main
    ### Google_Webdesigner http://www.google.com/linuxrepositories/
    deb [arch=amd64] http://dl.google.com/linux/webdesigner/deb/ stable main
    ### Highly_Explosive https://launchpad.net/~dhor/+archive/myway
    deb http://ppa.launchpad.net/dhor/myway/ubuntu bionic main
    deb-src http://ppa.launchpad.net/dhor/myway/ubuntu bionic main
    ### Mega https://mega.co.nz/
    deb http://mega.nz/linux/MEGAsync/xUbuntu_16.04/ ./
    ### MKVToolnix http://www.bunkus.org/videotools/mkvtoolnix/
    deb http://www.bunkus.org/ubuntu/bionic/ ./
    deb-src http://www.bunkus.org/ubuntu/bionic/ ./
    ### Opera http://www.opera.com/
    deb http://deb.opera.com/opera/ stable non-free
    deb http://deb.opera.com/opera-beta/ stable non-free
    ### OwnCloud_Desktop http://owncloud.org/
    deb http://download.opensuse.org/repositories/isv:/ownCloud:/community/xUbuntu_18.04/ /
    ### Wine https://launchpad.net/~ubuntu-wine/+archive/ppa/
    deb http://ppa.launchpad.net/ubuntu-wine/ppa/ubuntu bionic main
    deb-src http://ppa.launchpad.net/ubuntu-wine/ppa/ubuntu bionic main
	EOT
	[SOURCES_LIST__SERVER]=<<-EOT
	### Webmin http://www.webmin.com
    deb http://download.webmin.com/download/repository sarge contrib
    # deb-src http://download.webmin.com/download/repository sarge contrib
	EOT
	[SOURCES_LIST__LXC_HOST]=<<-EOT
	deb http://ppa.launchpad.net/juju/stable/ubuntu bionic main
	# deb-src http://ppa.launchpad.net/juju/stable/ubuntu bionic main
	EOT
	[SOURCES_LIST__DEV_WS]=<<-EOT
	EOT
	[SOURCES_LIST__MAIN_SERVER]=<<-EOT
	EOT
	[SOURCES_LIST__CONTAINER]=<<-EOT
	EOT
	[SOURCES_LIST__NAS]=<<-EOT
    ### Syncthing https://syncthing.net/
    deb http://apt.syncthing.net/ syncthing release
	EOT
	[SOURCES_LIST__PXE]=<<-EOT
	EOT
	[SOURCES_LIST__ROUTER]=<<-EOT
	EOT
	[SOURCES_LIST__WEB]=<<-EOT
	EOT
	[SOURCES_LIST__X11]=<<-EOT
	EOT
	### PPA_KEYS ###############################################################
	# NAME METHOD URL [KEY] seperated by %%%
	# METHOD=wget|apt-key|aar
	[PPA_KEYS__BASIC]=<<-EOT
	#â˜ƒ
	TeamViewer%%%wget%%%https://download.teamviewer.com/download/linux/signature/TeamViewer2017.asc
	GetDeb%%%wget%%%http://archive.getdeb.net/getdeb-archive.key
	Webmin%%%wget%%%http://www.webmin.com/jcameron-key.asc
	WebUpd8%%%apt-key%%%keyserver.ubuntu.com%%%4C9D234C
	EOT
	[PPA_KEYS__WS]=<<-EOT
	VirtualBox%%%wget%%%http://download.virtualbox.org/virtualbox/debian/oracle_vbox_2016.asc
	FreeCad%%%aar%%%ppa:freecad-maintainers/freecad-stable
	GIMP%%%apt-key%%%keyserver.ubuntu.com%%%614C4B38
	Gnome3%%%apt-key%%%keyserver.ubuntu.com%%%3B1510FD
	Google%%%wget%%%https://dl.google.com/linux/linux_signing_key.pub
	Highly_Explosive%%%apt-key%%%keyserver.ubuntu.com%%%93330B78
	MKVToolnix%%%wget%%%http://www.bunkus.org/gpg-pub-moritzbunkus.txt
	Opera%%%wget%%%http://deb.opera.com/archive.key
	OwnCloud_Desktop%%%wget%%%http://download.opensuse.org/repositories/isv:ownCloud:community/xUbuntu_16.04/Release.key
	Wine%%%apt-key%%%keyserver.ubuntu.com%%%883E8688397576B6C509DF495A9A06AEF9CB8DB0
	EOT
	[PPA_KEYS__SERVER]=""
	[PPA_KEYS__LXC_HOST]=<<-EOT
	Juju%%%aar%%%ppa:juju/stable
	EOT
	[PPA_KEYS__DEV_WS]=""
	[PPA_KEYS__MAIN_SERVER]=""
	[PPA_KEYS__CONTAINER]=""
	[PPA_KEYS__NAS]=<<-EOT
	Syncthing PPA Key%%%wget%%%https://syncthing.net/release-key.txt
	EOT
	[PPA_KEYS__WEB]=""
	[PPA_KEYS__X11]=""
	[PPA_KEYS__PXE]=""
	[PPA_KEYS__ROUTER]=""
	[PPA_KEYS__HONEYPOT]=""
	### PACKAGES ###############################################################
	[PACKAGES__BASIC]="mc trash-cli snapd git screen teamviewer"
	[PACKAGES__WS]="audacious google-chrome-stable google-webdesigner gparted lame playonlinux samba synaptic tilda winetricks wine-stable"
	[PACKAGES__SERVER]="openssh-server webmin"
	[PACKAGES__LXCHOST]="bridge-utils lxc lxcfs lxd lxd-tools xfsutils-linux"
	[PACKAGES__DEV_WS]="adb calibre fastboot forensics-all forensics-extra forensics-extra-gui forensics-full fslint geany geany-plugin-addons geany-plugin-git-changebar geany-plugin-lineoperations geany-plugin-miniscript geany-plugin-pairtaghighlight geany-plugin-projectorganize gprename masscan"
	[PACKAGES__MAIN_SERVER]="apt-cacher-ng"
	[PACKAGES__CONTAINER]=""
	[PACKAGES__FIREWALL]=""
	[PACKAGES__NAS]="nfsd proftpd samba"
	[PACKAGES__PXE]="atftpd"
	[PACKAGES__ROUTER]="bridge-utils ufw"
	[PACKAGES__WEB]="apache2 mysql-server mytop phpmyadmin proftpd php-cli"
	[PACKAGES__X11]=""
	### EXTRA SOFTWARE #########################################################
	[EXTRA_SW__DEV]="STARUML GITKRAKEN"
	if [[ "$[ADD_EXTRA_APP__STARUML]" = true ]]
then
    info_line "Installing StarUML"
    download "http://nl.archive.ubuntu.com/ubuntu/pool/main/libg/libgcrypt11/libgcrypt11_1.5.3-2ubuntu4.5_amd64.deb"
    install libgcrypt11_1.5.3-2ubuntu4.5_amd64.deb
    download "http://staruml.io/download/releases/StarUML-3.0.2-x86_64.AppImage"
    install StarUML-v2.8.0-64-bit.deb

fi
if [[ "$[ADD_EXTRA_APP__GITKRAKEN]" = true ]]
then
    install "https://release.gitkraken.com/linux/gitkraken-amd64.deb"


cr_sec_line "Installing GitKraken"
  download "https://release.gitkraken.com/linux/gitkraken-amd64.deb"
  install gitkraken-amd64.deb
fi
rm *.deb 2>&1 | dbg_line


	################################################################################

	[GARBAGE]
	################################################################################
	TMP_AGE=2
	GARBAGE_AGE=7
	LOG_AGE=30
	################################################################################

)
